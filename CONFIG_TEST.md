# 配置保存功能测试说明

## 测试目标

验证截图交互功能的配置保存和加载机制是否正常工作。

## 测试步骤

### 1. 配置保存测试

1. **启动应用并触发截图**
   - 确保进入截图显示界面
   - 验证默认不显示任何配置Fragment

2. **测试批注配置保存**
   - 点击底部菜单的批注选项
   - 验证显示批注配置Fragment
   - 修改颜色为黄色，粗细为10
   - 点击"应用"按钮
   - 验证Fragment消失，配置生效

3. **测试激光笔配置保存**
   - 点击底部菜单的激光笔选项
   - 验证显示激光笔配置Fragment
   - 修改颜色为绿色，大小为15
   - 点击"应用"按钮
   - 验证Fragment消失，配置生效

4. **测试放大镜配置保存**
   - 点击底部菜单的放大镜选项
   - 验证显示放大镜配置Fragment
   - 修改大小为8，放大倍数为3x
   - 点击"应用"按钮
   - 验证Fragment消失，配置生效

5. **测试聚光灯配置保存**
   - 点击底部菜单的聚光灯选项
   - 验证显示聚光灯配置Fragment
   - 修改大小为6，暗度为60%
   - 点击"应用"按钮
   - 验证Fragment消失，配置生效

### 2. 配置加载测试

1. **重启应用**
   - 完全关闭应用
   - 重新启动应用并触发截图

2. **验证配置加载**
   - 点击批注选项，验证颜色为黄色，粗细为10
   - 点击激光笔选项，验证颜色为绿色，大小为15
   - 点击放大镜选项，验证大小为8，放大倍数为3x
   - 点击聚光灯选项，验证大小为6，暗度为60%

### 3. Fragment显示控制测试

1. **首次选择测试**
   - 选择任意工具，验证显示配置Fragment

2. **再次选择相同工具测试**
   - 再次点击相同工具，验证Fragment消失

3. **选择不同工具测试**
   - 选择不同工具，验证显示新工具的配置Fragment

### 4. 功能交互测试

1. **批注功能测试**
   - 在截图上绘制，验证使用保存的配置
   - 测试清除功能

2. **激光笔功能测试**
   - 触摸屏幕，验证激光点使用保存的配置

3. **放大镜功能测试**
   - 移动手指，验证放大镜使用保存的配置

4. **聚光灯功能测试**
   - 移动手指，验证聚光灯使用保存的配置

## 预期结果

### 配置保存
- ✅ 所有配置修改后立即保存到本地
- ✅ 应用按钮点击后Fragment消失
- ✅ 配置立即生效

### 配置加载
- ✅ 应用重启后自动加载上次保存的配置
- ✅ 默认配置在首次使用时生效

### Fragment控制
- ✅ 首次选择工具显示配置Fragment
- ✅ 再次选择相同工具隐藏Fragment
- ✅ 选择不同工具显示新Fragment

### 功能交互
- ✅ 所有工具使用保存的配置
- ✅ 实时交互效果正常

## 日志验证

检查Logcat中的日志输出：
- `ScreenshotDisplayActivity`: 配置加载和保存日志
- `AnnotationFragment`: 配置更新日志
- `LaserFragment`: 配置更新日志
- `MagnifierFragment`: 配置更新日志
- `SpotlightFragment`: 配置更新日志

## 注意事项

1. 确保SharedPreferences权限正常
2. 验证配置转换逻辑正确（颜色索引转换等）
3. 检查Fragment生命周期管理
4. 验证内存使用情况（特别是放大镜功能） 